# 검증 질문(Assertion) 및 합격 기준

Kubescape를 사용하여 검증할 수 있는 **검증 질문(Assertion)**과 **합격 기준**을 정의합니다.

## 검증 질문(Assertion) 정의 원칙

### 핵심 원칙

**"도구"가 아니라 "검증 질문(Assertion)"으로 카테고리를 고정**

- 도구는 경계가 모호하다
- 같은 도구라도 질문이 다르면 다른 카테고리에 넣어도 된다
- 필요하다면 "Primary 카테고리 1개 + Secondary 태그"로 운영

## Kubescape 관련 검증 질문(Assertion)

### 1. 보안 설정 검증

#### Assertion 1.1: "클러스터 보안 설정이 CIS 기준을 만족하는가?"

| 항목 | 내용 |
|------|------|
| **검증 질문** | "클러스터 보안 설정이 CIS 기준을 만족하는가?" |
| **테스트 방법** | CIS Benchmark 스캔 |
| **합격 기준** | **CIS Benchmark 80% 이상 통과** |
| **실행 환경** | 테스트/운영 환경 |
| **비고** | **보안 설정 확인 필수 항목** |

**합격 판단:**

```bash
# CIS Benchmark 점수 확인
SCORE=$(cat cis-scan.json | jq -r '.summary.score')

if (( $(echo "$SCORE < 80" | bc -l) )); then
  echo "❌ CIS Benchmark 검증 실패: 운영 승인 불가"
  exit 1
fi
```

### 2. 취약점 검증

#### Assertion 2.1: "컨테이너 이미지에 Critical 취약점이 없는가?"

| 항목 | 내용 |
|------|------|
| **검증 질문** | "컨테이너 이미지에 Critical 취약점이 없는가?" |
| **테스트 방법** | 이미지 스캔 |
| **합격 기준** | **Critical 취약점 0건** |
| **비고** | **이미지 보안 확인** |

### 3. 컨트롤 검증

#### Assertion 3.1: "필수 보안 컨트롤이 통과하는가?"

| 항목 | 내용 |
|------|------|
| **검증 질문** | "필수 보안 컨트롤이 통과하는가?" |
| **테스트 방법** | 특정 컨트롤 스캔 |
| **합격 기준** | **필수 컨트롤 100% 통과** |
| **비고** | **보안 정책 준수 확인** |

## 합격 기준 정의

### 기본 합격 기준 (권장)

| 검증 항목 | 합격 기준 | 비고 |
|----------|----------|------|
| **CIS Benchmark** | CIS Benchmark 80% 이상 통과 | 보안 설정 확인 |
| **Critical 취약점** | Critical 취약점 0건 | 이미지 보안 확인 |
| **필수 컨트롤** | 필수 컨트롤 100% 통과 | 보안 정책 준수 확인 |

## CAT 전체 흐름에서의 위치

### CAT 단계별 검증 질문

| 단계 | 카테고리 | 검증 질문(Assertion) | 도구 | 합격 기준 |
|------|---------|---------------------|------|----------|
| 1 | Conformance/Config | "클러스터가 공식 Conformance를 만족하는가?" | Sonobuoy | Non-disruptive Conformance 100% 통과 |
| **2** | **Security** | **"보안 설정이 기준을 만족하는가?"** | **Kubescape** | **CIS Benchmark 80% 이상 통과** |
| 3 | Performance/Scale | "성능이 요구 수준인가?" | kube-burner | p95 API latency < X ms |
| 4 | Resilience/Fault Tolerance | "장애 상황에서도 정상 동작을 유지하는가?" | Chaos Mesh | 실험 완료 (phase: Finished) |
| 5 | Automation | "검증이 자동화되었는가?" | CI/CD | 자동 실행 및 리포트 생성 |

## 관련 문서

- [06-CAT-활용.md](./06-CAT-활용.md) - CAT 관점에서의 Kubescape 활용
- [08-실무-체크리스트.md](./08-실무-체크리스트.md) - 실무 적용 시 확인 사항

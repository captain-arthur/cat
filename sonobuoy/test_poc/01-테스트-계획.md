# Sonobuoy POC 테스트 계획

## 테스트 실행 전 확인 사항

### 1. 어떤 테스트를 실행하는가?

**모드: Quick Mode**

Quick 모드는 **소수의 핵심 테스트만 실행**하는 모드입니다.

#### 실행되는 테스트

| 테스트 | 설명 |
|--------|------|
| **E2E_FOCUS** | `"Pods should be submitted and removed"` |
| **테스트 내용** | Pod 생성 및 삭제 기능의 기본 동작 검증 |

**상세:**
- Pod 생성/제출이 정상 동작하는지
- Pod 삭제가 정상 동작하는지
- 기본적인 Kubernetes API 동작 확인

#### 실행되지 않는 테스트

Quick 모드는 다음 테스트를 **제외**합니다:
- 전체 Conformance 테스트
- Slow 테스트
- Disruptive 테스트
- 복잡한 통합 시나리오

### 2. 왜 이 테스트를 실행하는가?

| 목적 | 설명 |
|------|------|
| **빠른 검증** | 클러스터의 기본 동작을 빠르게 확인 (5-10분) |
| **기본 기능 확인** | Pod 생성/삭제 같은 핵심 기능이 정상 동작하는지 확인 |
| **POC 목적** | Sonobuoy의 동작 방식과 결과 형식을 이해하기 위한 테스트 |

### 3. 이 테스트를 통과하면 무슨 의미인가?

| 통과 의미 | 설명 |
|-----------|------|
| **기본 API 동작 정상** | Kubernetes API가 기본적으로 정상 동작함 |
| **Pod 생성/삭제 정상** | 가장 기본적인 워크로드 관리 기능이 정상임 |
| **클러스터 기본 상태 양호** | 클러스터가 최소한의 기능은 제공함 |

**제한사항:**
- ✅ **부분적 검증**: 전체 기능의 일부만 검증
- ❌ **완전한 검증 아님**: 전체 Conformance는 아님
- ❌ **운영 승인 불가**: Quick 모드 통과만으로는 운영 승인 불가

### 4. 테스트 시나리오 (Test Scenario)

#### 시나리오: Pod 생성 및 삭제

```
1. 테스트 준비
   - 테스트 네임스페이스 생성 (sonobuoy)
   - 필요한 리소스 준비

2. Pod 생성 테스트
   - Pod를 생성 (kubectl apply)
   - Pod가 정상적으로 스케줄링되는지 확인
   - Pod가 Running 상태가 되는지 확인

3. Pod 삭제 테스트
   - Pod를 삭제 (kubectl delete)
   - Pod가 정상적으로 종료되는지 확인
   - 리소스가 정상적으로 정리되는지 확인

4. 결과 수집
   - 테스트 결과 수집
   - 로그 수집
   - 리포트 생성
```

### 5. 테스트 목록 (Test List)

Quick 모드에서 실행되는 실제 테스트는 매우 제한적입니다:

| 테스트 이름 | 설명 | 기대 결과 |
|------------|------|----------|
| `Pods should be submitted and removed` | Pod 생성 및 삭제 기본 테스트 | Pass |

**주의사항:**
- Quick 모드는 **단일 테스트 또는 매우 소수의 테스트만** 실행
- 실제 운영 검증을 위해서는 `non-disruptive-conformance` 모드 권장

## 테스트 목록 확인 방법

Sonobuoy에서 어떤 테스트가 실행되는지 확인하는 방법은 **02-테스트-목록-확인방법.md**를 참조하세요.

### 빠른 확인 명령어

```bash
# Quick 모드에서 실행되는 테스트 확인
sonobuoy gen --mode quick | grep -A 2 "E2E_FOCUS"

# 결과: "Pods should be submitted and removed" 테스트 1개만 실행
```

## 테스트 실행 계획

### 실행 전 체크리스트

- [x] Sonobuoy 설치 확인
- [x] 클러스터 연결 확인
- [x] 테스트 내용 확인 (이 문서)
- [x] 테스트 목록 확인 방법 학습 (02-테스트-목록-확인방법.md)
- [ ] 실제 테스트 실행 (다음 단계)

### 실행 계획

1. **Quick 모드 실행**
   ```bash
   sonobuoy run --mode quick --wait
   ```

2. **결과 확인**
   - 결과 파일 다운로드
   - 결과 분석

3. **결과 문서화**
   - 실행 결과 정리
   - 결과 분석 문서 작성

## 예상 결과

### 성공 케이스

| 항목 | 예상 결과 |
|------|----------|
| **테스트 실행** | 정상 완료 |
| **결과 파일** | `results.tar.gz` 생성 |
| **테스트 결과** | Pass (1개 테스트 통과) |
| **실행 시간** | 5-10분 |

### 결과 해석

- **Pass**: Pod 생성/삭제 기능이 정상 동작함
- **Fail**: 기본 API 동작에 문제가 있음 (클러스터 상태 점검 필요)

## 다음 단계

테스트 내용을 확인했으므로, 다음 문서에서 실제 실행 결과를 확인합니다:
- `02-실행-결과.md` - 실제 테스트 실행 결과
- `03-결과-분석.md` - 결과 분석 및 해석

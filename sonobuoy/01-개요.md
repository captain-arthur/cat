# Sonobuoy 개요

## Sonobuoy란?

Sonobuoy는 쿠버네티스 클러스터가 **공식 표준(Conformance Specification)을 준수하는지** 검증하고, 클러스터 상태를 진단하는 도구입니다.

| 속성 | 설명 |
|------|------|
| **목적** | 클러스터가 공식 Kubernetes 표준(Conformance Specification)을 만족하는지 검증 |
| **주체** | CNCF의 Certified Kubernetes Program에서 공식 사용 |
| **특징** | 클러스터 중립적(cluster-agnostic), 비파괴적(non-destructive) 실행 가능 |
| **확장성** | 플러그인 구조로 커스텀 검증 추가 가능 |
| **지원 버전** | Kubernetes v1.17 이상 (최신 3개 마이너 버전 지원) |

## 주요 기능

| 기능 | 상세 설명 |
|------|----------|
| **Conformance 테스트** | 공식 Kubernetes Conformance 테스트 실행. CNCF Certified Kubernetes 인증 기준 사용 |
| **플러그인 구조** | 기본 제공 플러그인(e2e/conformance, 로그 수집) 외 커스텀 플러그인 지원 |
| **다양한 실행 모드** | `quick`, `non-disruptive-conformance`, `certified-conformance` 등 모드 제공 |
| **비파괴적 실행** | 운영 중 클러스터에서도 영향 최소화하는 모드 제공 |
| **리포트 생성** | 테스트 결과, 실패 항목, 로그를 표준화된 형태로 제공 |
| **Air-gapped 지원** | 사설 레지스트리/미러 환경에서도 실행 가능 |

## 주요 사용 사례

| 사용 사례 | 설명 |
|----------|------|
| **기본 자격 검증** | "이 클러스터가 쿠버네티스답게 동작하는가?" 검증 |
| **공식 인증 준비** | CNCF Certified Kubernetes 인증을 위한 Conformance 테스트 실행 |
| **버전 업그레이드 검증** | 클러스터 버전 업그레이드 후 호환성 확인 |
| **클러스터 진단** | 워크로드 디버깅, 구성 이상 탐지, 로그 수집 |
| **인수 테스트** | 클러스터 배포 후 기본 기능 정상 동작 확인 |

## 장점

| 장점 | 설명 |
|------|------|
| **공식 표준 기반** | CNCF Certified Conformance 기준 사용으로 신뢰성 높음 |
| **비파괴적 모드** | 운영 환경에서도 서비스 중단 없이 검증 가능 |
| **확장성** | 플러그인으로 커스텀 검증 항목 추가 가능 |
| **리포트 표준화** | 결과를 표준화된 형태로 제공하여 추적 및 공유 용이 |
| **클러스터 중립** | 다양한 쿠버네티스 배포판에서 동일하게 작동 |

## 제약 사항

| 제약 | 설명 |
|------|------|
| **실행 시간** | 전체 Conformance 테스트 실행 시 상당한 시간 소요 (수 시간) |
| **권한 요구** | cluster-admin 권한 필요 (managed 클러스터에서는 제약 가능) |
| **Disruptive 테스트 위험** | `certified-conformance` 모드는 운영 워크로드에 영향 줄 수 있음 |
| **플러그인 개발** | 커스텀 플러그인 작성 시 학습 곡선 존재 |
| **환경 제약** | Air-gapped 환경에서는 이미지 미러링 등 사전 준비 필요 |

## CAT 관점에서의 역할

Sonobuoy는 **쿠버네티스 클러스터 인수테스트(CAT)**의 **"기본 자격/기능(Conformance/Config)"** 카테고리에 해당하는 핵심 도구입니다.

### 검증 질문(Assertion) 예시

- "클러스터가 공식 Kubernetes Conformance를 100% 통과하는가?"
- "표준 API 동작, 리소스 스펙, 스케줄러 동작이 Kubernetes 표준과 차이가 없는가?"
- "운영 환경에서 기본 자격을 확인했는가?"

자세한 내용은 [06-CAT-활용.md](./06-CAT-활용.md) 참조.

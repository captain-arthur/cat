# Testkube 구성 요소

Testkube는 다음 주요 구성 요소로 이루어져 있습니다.

## 아키텍처 개요

```
┌─────────────────────────────────────────────────────────────┐
│              Testkube Control Plane                         │
│         테스트 오케스트레이션 및 관리                         │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ↓
┌─────────────────────────────────────────────────────────────┐
│         Kubernetes API Server                                │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │   CRDs (Custom Resource Definitions)                 │  │
│  │   - Test                                             │  │
│  │   - TestWorkflow                                     │  │
│  │   - TestExecution                                    │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                              │
│                   ↓                                          │
│  ┌──────────────────────────────────────────────────────┐  │
│  │   Test Execution (Job/Pod)                           │  │
│  │   - Postman, k6, Cypress 등 다양한 테스트 실행      │  │
│  │   - 로그 및 아티팩트 수집                            │  │
│  └──────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

## 구성 요소 상세

### 1. CLI 유틸리티

커맨드라인에서 실행하는 클라이언트 도구입니다.

| 명령어 | 기능 | 설명 |
|--------|------|------|
| `testkube create test` | 테스트 생성 | 다양한 테스트 타입으로 테스트 생성 |
| `testkube run test` | 테스트 실행 | 테스트 실행 및 결과 확인 |
| `testkube create testworkflow` | Workflow 생성 | TestWorkflow 생성 |
| `testkube run testworkflow` | Workflow 실행 | TestWorkflow 실행 |
| `testkube get tests` | 테스트 목록 | 생성된 테스트 목록 확인 |

### 2. Control Plane

클러스터 내부에서 테스트를 오케스트레이션하는 핵심 컴포넌트입니다.

| 역할 | 설명 |
|------|------|
| **테스트 관리** | Test, TestWorkflow CRD 관리 |
| **실행 조율** | 테스트 실행을 Job/Pod로 생성 및 관리 |
| **결과 수집** | 테스트 결과, 로그, 아티팩트 수집 |
| **API 제공** | REST API를 통한 테스트 관리 |

### 3. Executors

다양한 테스트 프레임워크를 실행하는 Executor들입니다.

| Executor | 테스트 타입 | 설명 |
|----------|------------|------|
| **Postman** | API 테스트 | Postman 컬렉션 실행 |
| **k6** | 성능 테스트 | k6 스크립트 실행 |
| **Cypress** | E2E 테스트 | Cypress 테스트 실행 |
| **Curl** | HTTP 테스트 | Curl 명령어 실행 |
| **SoapUI** | SOAP 테스트 | SoapUI 프로젝트 실행 |

### 4. TestWorkflow

여러 테스트를 단계별로 구성하여 복합 테스트를 실행하는 기능입니다.

| Workflow 타입 | 설명 |
|--------------|------|
| **Sequential** | 순차적으로 실행 |
| **Parallel** | 병렬로 실행 |
| **Matrix** | 매트릭스 실행 |

## 테스트 실행 흐름

```
1. 사용자가 테스트 실행 요청
   └─ testkube run test my-test

2. Control Plane이 Test CRD 확인
   └─ Test 정의 및 Executor 확인

3. Kubernetes Job/Pod 생성
   └─ 적절한 Executor 이미지로 Pod 생성

4. 테스트 실행
   └─ Executor가 테스트 실행 및 결과 수집

5. 결과 저장
   └─ TestExecution CRD에 결과 저장
```

## 관련 문서

- [03-설치및사용법.md](./03-설치및사용법.md) - 설치부터 실행까지 기본 워크플로우
- [04-테스트-정의.md](./04-테스트-정의.md) - Test 및 TestWorkflow 정의 방법
- [05-워크플로우.md](./05-워크플로우.md) - TestWorkflow 상세 가이드

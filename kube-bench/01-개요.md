# kube-bench 개요

## kube-bench란?

kube-bench는 쿠버네티스 클러스터가 **CIS Kubernetes Benchmark** 보안 모범 사례에 부합하는지 자동으로 검사하는 오픈소스 보안 벤치마크 도구입니다.

| 속성 | 설명 |
|------|------|
| **목적** | 클러스터 보안 설정이 CIS Kubernetes Benchmark 기준을 만족하는지 검증 |
| **주체** | Aqua Security 개발 (Apache 2.0 라이선스) |
| **특징** | CIS Benchmark 특화, 마스터/워커 노드 검사, 자동 버전 감지 |
| **언어** | Go |
| **지원 환경** | Kubernetes (마스터/워커 노드) |

## 주요 기능

| 기능 | 상세 설명 |
|------|----------|
| **CIS Benchmark 검증** | CIS Kubernetes Benchmark 기준 준수 여부 검증 |
| **자동 버전 감지** | Kubernetes 버전을 감지하여 적절한 CIS 기준 선택 |
| **노드 유형별 검사** | 마스터 노드, 워커 노드, etcd 별 검사 수행 |
| **상세 리포트** | PASS/FAIL/WARN/INFO 결과 및 권고(remediation) 제공 |
| **다양한 출력 형식** | stdout, JSON, JUnit XML 등 |

## 주요 사용 사례

| 사용 사례 | 설명 |
|----------|------|
| **CIS Benchmark 준수 검증** | "클러스터 보안 설정이 CIS 기준을 만족하는가?" 검증 |
| **정기 보안 감사** | 주기적으로 클러스터 보안 설정 감사 |
| **인수 테스트** | 클러스터 배포 후 보안 설정 확인 |
| **규정 준수** | 규정 준수를 위한 보안 기준 검증 |

## 장점

| 장점 | 설명 |
|------|------|
| **CIS Benchmark 특화** | CIS Kubernetes Benchmark에 특화된 전문 도구 |
| **자동 버전 감지** | Kubernetes 버전을 자동 감지하여 적절한 기준 적용 |
| **노드 유형별 검사** | 마스터/워커 노드별 세밀한 검사 수행 |
| **상세 권고** | 실패 항목에 대한 구체적인 수정 권고 제공 |

## 제약 사항

| 제약 | 설명 |
|------|------|
| **관리형 클러스터 제한** | EKS, GKE, AKS 등 관리형 클러스터에서는 마스터 노드 검사 불가 |
| **권한 요구** | 노드 파일시스템, 프로세스, 설정 파일 접근 권한 필요 |
| **스냅샷 기반** | 실시간 모니터링이 아닌 스냅샷 기반 검사 |

## Sonobuoy, ClusterLoader2, kube-burner, Chaos Toolkit, Chaos Mesh, LitmusChaos, Kubescape와의 관계

| 도구 | 목적 | 특징 |
|------|------|------|
| **Sonobuoy** | Conformance 테스트 (기본 자격 검증) | 기능 정상 동작 여부 검증 |
| **ClusterLoader2** | 성능/스케일 테스트 | 내장 measurement, 구조화된 리포팅 |
| **kube-burner** | 성능/스케일 테스트 | Prometheus 중심 관측/리포팅 |
| **Chaos Toolkit** | 복원력/장애 대응 테스트 | Python 기반, Steady-State Hypothesis |
| **Chaos Mesh** | 복원력/장애 대응 테스트 | Kubernetes 네이티브, CRD 기반, Dashboard |
| **LitmusChaos** | 복원력/장애 대응 테스트 | Kubernetes 네이티브, ChaosHub, Probes |
| **Kubescape** | 보안 기본선 검증 | 보안 스캔, 취약점 탐지, 다중 프레임워크 |
| **kube-bench** | 보안 기본선 검증 | CIS Benchmark 특화, 구성 설정 감사 |

## CAT 관점에서의 역할

kube-bench는 **쿠버네티스 클러스터 인수테스트(CAT)**의 **"보안 기본선(Security baseline)"** 카테고리에 해당하는 핵심 도구입니다.

### 검증 질문(Assertion) 예시

- "클러스터 보안 설정이 CIS 기준을 만족하는가?"
- "마스터 노드 보안 설정이 적절한가?"
- "워커 노드 보안 설정이 적절한가?"

자세한 내용은 [06-CAT-활용.md](./06-CAT-활용.md) 참조.

## 관련 문서

- [02-구성요소.md](./02-구성요소.md) - 아키텍처 및 구성 요소 상세 설명
- [03-설치및사용법.md](./03-설치및사용법.md) - 설치 및 사용 방법
- [04-검사-항목.md](./04-검사-항목.md) - 검사 항목 및 방법

# Chaos Toolkit 개요

## Chaos Toolkit이란?

Chaos Toolkit은 쿠버네티스 클러스터 및 시스템의 **복원력(Resilience)과 장애 대응 능력**을 실험을 통해 검증하는 Chaos Engineering 도구입니다.

| 속성 | 설명 |
|------|------|
| **목적** | 시스템이 장애 상황에서도 정상 동작을 유지하는지 실험을 통해 검증 |
| **주체** | 오픈소스 프로젝트 (Apache 2.0 라이선스) |
| **특징** | 선언적(JSON/YAML) 실험 정의, Steady-State Hypothesis 검증, Rollback 지원 |
| **언어** | Python 3.8 이상 |
| **지원 환경** | Kubernetes, AWS, Azure, GCP, HTTP, Process 등 (Extension 기반) |

## 주요 기능

| 기능 | 상세 설명 |
|------|----------|
| **실험(Experiment) 정의** | JSON/YAML로 실험 시나리오 선언적 정의 |
| **Steady-State Hypothesis** | 실험 전/후 시스템의 정상 상태 정의 및 검증 |
| **Probes & Actions** | Probe: 상태 확인, Action: 장애 주입 |
| **Rollback** | 실험 후 문제 발생 시 자동 복구 가능 |
| **Journal & Report** | 실험 결과를 Journal로 기록, HTML/PDF 리포트 생성 |
| **Kubernetes Operator** | K8s CRD로 실험 정의 및 자동 실행 가능 |

## 주요 사용 사례

| 사용 사례 | 설명 |
|----------|------|
| **복원력 검증** | "Pod가 죽었을 때 자동으로 복구되는가?" 검증 |
| **장애 대응 테스트** | 노드 장애, 네트워크 분할 등 장애 상황 시뮬레이션 |
| **고가용성 확인** | LoadBalancer 장애, Storage 장애 등 시나리오 테스트 |
| **인수 테스트** | 클러스터 배포 후 장애 대응 능력 확인 |

## 장점

| 장점 | 설명 |
|------|------|
| **선언적 정의** | JSON/YAML로 실험을 코드화하여 버전 관리 및 재사용 가능 |
| **확장성** | 다양한 Extension/Driver 제공 (Kubernetes, AWS, Prometheus 등) |
| **자동화** | CI/CD 파이프라인에 통합하여 자동 실행 가능 |
| **표준화** | Steady-State Hypothesis 개념으로 일관된 실험 구조 |

## 제약 사항

| 제약 | 설명 |
|------|------|
| **메트릭 수집 제한** | 내장 메트릭 수집 기능 없음, Probe 또는 외부 모니터링(Prometheus 등) 필요 |
| **Rollback 의존성** | Rollback을 명시적으로 정의하지 않으면 자동 복구 불가 |
| **실험 정의 복잡도** | 복잡한 시나리오의 경우 실험 파일 작성이 복잡할 수 있음 |

## Sonobuoy, ClusterLoader2, kube-burner와의 관계

| 도구 | 목적 | 특징 |
|------|------|------|
| **Sonobuoy** | Conformance 테스트 (기본 자격 검증) | 기능 정상 동작 여부 검증 |
| **ClusterLoader2** | 성능/스케일 테스트 | 내장 measurement, 구조화된 리포팅 |
| **kube-burner** | 성능/스케일 테스트 | Prometheus 중심 관측/리포팅 |
| **Chaos Toolkit** | 복원력/장애 대응 테스트 | 장애 주입 후 시스템 동작 검증 |

## CAT 관점에서의 역할

Chaos Toolkit은 **쿠버네티스 클러스터 인수테스트(CAT)**의 **"복원력/장애 대응(Resilience/Fault Tolerance)"** 카테고리에 해당하는 핵심 도구입니다.

### 검증 질문(Assertion) 예시

- "Pod가 죽었을 때 자동으로 재생성되는가?"
- "노드 장애 시 워크로드가 다른 노드로 이동하는가?"
- "네트워크 분할 상황에서도 서비스가 정상 동작하는가?"

자세한 내용은 [06-CAT-활용.md](./06-CAT-활용.md) 참조.

## 관련 문서

- [02-구성요소.md](./02-구성요소.md) - 아키텍처 및 구성 요소 상세 설명
- [03-설치및사용법.md](./03-설치및사용법.md) - 설치 및 사용 방법
- [04-실험-정의.md](./04-실험-정의.md) - Experiment 파일 작성 방법

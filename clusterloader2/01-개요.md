# ClusterLoader2 개요

## ClusterLoader2란?

ClusterLoader2(CL2)는 쿠버네티스 클러스터의 **성능 및 스케일 성능 테스트**를 수행하는 **공식 프레임워크**입니다.

| 속성 | 설명 |
|------|------|
| **목적** | 클러스터가 요구 성능 수준 및 확장성을 만족하는지 검증 |
| **주체** | Kubernetes 공식 리포지토리 (`kubernetes/perf-tests`) |
| **특징** | 내장 measurement, YAML 기반 테스트 정의, threshold 검증 지원 |
| **위치** | `github.com/kubernetes/perf-tests/clusterloader2` |
| **지원 버전** | Kubernetes v1.17 이상 |

## 주요 기능

| 기능 | 상세 설명 |
|------|----------|
| **내장 Measurement** | PodStartupLatency, APIAvailability, APIResponsiveness 등 측정 기능 내장 |
| **YAML 기반 테스트** | 테스트 시나리오를 YAML로 선언적 정의 (Object Template, Modules 지원) |
| **Threshold 검증** | 측정 결과가 threshold를 벗어나면 테스트 실패 처리 가능 |
| **Prometheus 통합** | Prometheus 스택 자동 설치/정리 및 메트릭 수집 (선택적) |
| **리포팅** | p50, p90, p99 등 통계 및 summary 출력 |
| **자동 Cleanup** | 선택적 (기본값은 자동 cleanup 없음) |

## 주요 사용 사례

| 사용 사례 | 설명 |
|----------|------|
| **성능 검증** | "클러스터가 요구 성능 수준을 만족하는가?" 검증 |
| **확장성 테스트** | 대규모 리소스 환경에서의 성능 확인 |
| **API Server 성능** | API latency, API responsiveness 측정 |
| **Pod 시작 성능** | Pod 생성 → Ready까지 시간 측정 |
| **인수 테스트** | 클러스터 배포 후 성능 수준 확인 |

## 장점

| 장점 | 설명 |
|------|------|
| **공식 프레임워크** | Kubernetes 공식 리포지토리에서 관리되는 표준 프레임워크 |
| **내장 Measurement** | Prometheus 없이도 PodStartupLatency, APIAvailability 등 측정 가능 |
| **구조화된 리포팅** | p50, p90, p99 등 통계 및 summary를 바로 출력 |
| **Threshold 검증** | 테스트 결과가 threshold를 벗어나면 자동으로 실패 처리 |
| **YAML 기반** | 테스트 시나리오를 YAML로 선언적 정의하여 재사용 가능 |

## 제약사항

| 제약사항 | 설명 |
|---------|------|
| **자동 Cleanup 없음** | 기본적으로 테스트 완료 후 리소스가 남아있음 (수동 정리 필요) |
| **Prometheus 의존성** | 일부 고급 메트릭은 Prometheus 필요 (내장 measurement만으로는 제한적) |
| **설치 복잡도** | 공식 리포지토리에서 빌드해야 함 (바이너리 배포 제한적) |

## Sonobuoy 및 kube-burner와의 관계

| 도구 | 목적 | 공식성 | 특징 |
|------|------|--------|------|
| **Sonobuoy** | Conformance 테스트 (기본 자격 검증) | CNCF 공식 | 기능 정상 동작 여부 검증 |
| **ClusterLoader2** | 성능/스케일 테스트 | Kubernetes 공식 | 내장 measurement, 구조화된 리포팅 |
| **kube-burner** | 성능/스케일 테스트 | CNCF Sandbox | Prometheus 중심 관측/리포팅 |

## 관련 문서

- [02-구성요소.md](./02-구성요소.md) - 아키텍처 및 구성 요소 상세 설명
- [03-설치및사용법.md](./03-설치및사용법.md) - 설치 및 사용 방법
- [07-kube-burner-비교.md](./07-kube-burner-비교.md) - kube-burner와의 차이점

# 검증 질문(Assertion) 및 합격 기준

LitmusChaos를 사용하여 검증할 수 있는 **검증 질문(Assertion)**과 **합격 기준**을 정의합니다.

## 검증 질문(Assertion) 정의 원칙

### 핵심 원칙

**"도구"가 아니라 "검증 질문(Assertion)"으로 카테고리를 고정**

- 도구는 경계가 모호하다
- 같은 도구라도 질문이 다르면 다른 카테고리에 넣어도 된다
- 필요하다면 "Primary 카테고리 1개 + Secondary 태그"로 운영

## LitmusChaos 관련 검증 질문(Assertion)

### 1. Pod 복원력 검증

#### Assertion 1.1: "Pod가 죽었을 때 자동으로 복구되는가?"

| 항목 | 내용 |
|------|------|
| **검증 질문** | "Pod가 죽었을 때 자동으로 복구되는가?" |
| **테스트 방법** | Pod Delete 실험 → ChaosResult 확인 |
| **합격 기준** | **ChaosResult verdict: Pass** |
| **실행 환경** | 테스트/운영 환경 (비파괴적) |
| **비고** | **고가용성 확인 필수 항목** |

**합격 판단:**

```bash
# ChaosResult verdict 확인
VERDICT=$(kubectl get chaosresult pod-delete-example-pod-delete -n default -o jsonpath='{.status.experimentStatus.verdict}')
if [ "$VERDICT" != "Pass" ]; then
  echo "❌ Pod 자동 복구 검증 실패: 운영 승인 불가"
  exit 1
fi
```

### 2. Probe 기반 검증

#### Assertion 2.1: "Probe 검증이 통과하는가?"

| 항목 | 내용 |
|------|------|
| **검증 질문** | "실험 전/후 Probe 검증이 통과하는가?" |
| **테스트 방법** | Probe 검증 → ChaosResult 확인 |
| **합격 기준** | **모든 Probe 검증 통과 (verdict: Pass)** |
| **비고** | **Steady State 유지 확인** |

## 합격 기준 정의

### 기본 합격 기준 (권장)

| 검증 항목 | 합격 기준 | 비고 |
|----------|----------|------|
| **ChaosResult verdict** | verdict: Pass | 실험 성공 확인 |
| **Probe 검증** | 모든 Probe 검증 통과 | Steady State 유지 확인 |

### ChaosResult verdict 기반 합격 기준

| Verdict | 의미 | 합격 여부 |
|---------|------|----------|
| `Pass` | 실험 성공 | ✅ 합격 |
| `Fail` | 실험 실패 | ❌ 불합격 |
| `Awaited` | 대기 중 | ⚠️ 진행 중 |

## CAT 전체 흐름에서의 위치

### CAT 단계별 검증 질문

| 단계 | 카테고리 | 검증 질문(Assertion) | 도구 | 합격 기준 |
|------|---------|---------------------|------|----------|
| 1 | Conformance/Config | "클러스터가 공식 Conformance를 만족하는가?" | Sonobuoy | Non-disruptive Conformance 100% 통과 |
| 2 | Security | "보안 설정이 CIS 기준을 만족하는가?" | kube-bench | High/Critical 0건 |
| 3 | Performance/Scale | "성능이 요구 수준인가?" | kube-burner | p95 API latency < X ms |
| **4** | **Resilience/Fault Tolerance** | **"장애 상황에서도 정상 동작을 유지하는가?"** | **LitmusChaos** | **ChaosResult verdict: Pass** |
| 5 | Automation | "검증이 자동화되었는가?" | CI/CD | 자동 실행 및 리포트 생성 |

## 관련 문서

- [06-CAT-활용.md](./06-CAT-활용.md) - CAT 관점에서의 LitmusChaos 활용
- [08-실무-체크리스트.md](./08-실무-체크리스트.md) - 실무 적용 시 확인 사항

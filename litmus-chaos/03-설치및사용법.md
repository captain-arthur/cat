# LitmusChaos 설치 및 사용법

LitmusChaos를 설치하고 실행하여 결과를 확인하는 전체 워크플로우를 설명합니다.

## 설치

### Helm Chart로 설치 (권장)

```bash
# Helm repository 추가
helm repo add litmuschaos https://litmuschaos.github.io/litmus-helm/
helm repo update

# LitmusChaos 설치
helm install litmus litmuschaos/litmus \
  --namespace=litmus \
  --create-namespace \
  --version=3.0.0

# 설치 확인
kubectl get pods -n litmus
```

### 설치 확인

```bash
# Pod 상태 확인
kubectl get pods -n litmus

# CRD 확인
kubectl get crd | grep litmuschaos

# ChaosCenter Service 확인
kubectl get svc -n litmus litmusportal-frontend
```

## 기본 워크플로우

### 1. ChaosCenter 접근

```bash
# Port Forward로 ChaosCenter 접근
kubectl port-forward -n litmus svc/litmusportal-frontend 9091:9091

# 브라우저에서 접근
# http://localhost:9091
```

### 2. Chaos Experiment 생성

#### 예시: Pod Delete 실험

**pod-delete.yaml:**

```yaml
apiVersion: litmuschaos.io/v1alpha1
kind: ChaosEngine
metadata:
  name: pod-delete-example
  namespace: default
spec:
  appinfo:
    appns: default
    applabel: app=test-app
    appkind: deployment
  annotationCheck: 'true'
  engineState: 'active'
  chaosServiceAccount: litmus-admin
  monitoring: false
  jobCleanUpPolicy: 'retain'
  experiments:
    - name: pod-delete
      spec:
        components:
          env:
            - name: TOTAL_CHAOS_DURATION
              value: '30'
            - name: CHAOS_INTERVAL
              value: '10'
            - name: FORCE
              value: 'false'
```

**실험 생성:**

```bash
# ChaosEngine 생성
kubectl apply -f pod-delete.yaml

# 실험 상태 확인
kubectl get chaosengine pod-delete-example -n default

# ChaosResult 확인
kubectl get chaosresult -n default
```

### 3. 실험 상태 확인

```bash
# ChaosEngine 상태 확인
kubectl get chaosengine -n default

# ChaosResult 확인
kubectl get chaosresult -n default

# 실험 상세 확인
kubectl describe chaosengine pod-delete-example -n default

# ChaosResult 상세 확인
kubectl describe chaosresult pod-delete-example-pod-delete -n default
```

### 4. 실험 삭제

```bash
# 실험 삭제 (자동 정리)
kubectl delete chaosengine pod-delete-example -n default
```

## 관련 문서

- [04-실험-정의.md](./04-실험-정의.md) - Chaos Experiment 정의 상세 가이드
- [05-워크플로우.md](./05-워크플로우.md) - Workflow 사용 방법
- [08-실무-체크리스트.md](./08-실무-체크리스트.md) - 실무 적용 시 확인 사항
